
format2hd - Windows 用フロッピーディスク簡易フォーマットツール


免責
----
本プログラムは無償で利用可能ですが、完全に無保証です。
利用者の責任においてご利用ください。


目的
----
Windows上でいわゆる３モードFDDのディスク初期化（フォーマット）を行う。
Windows 10 Anniversary Updateでformatコマンドから2HD形式（1.23 MB,
1024bytes/sector, 77 cylinders）のフォーマット機能が削除されたので、必要に
迫られて作成。
（2HD以外のフォーマットもできるが、それらは標準のformatコマンドで可能なので
そちらを使ったほうが「安全」だと思う）


動作要件
--------
・x86(32bit)/x64(64bit)のWindows（おそらくNT4以上で動作可能。95/98/Meでは動作しない）
・Windowsがサポートしているフロッピーディスクドライブ（2DD/2HD/1.44M）


用法
----
Windowsのコマンドプロンプトから実行します。

format2hd [ドライブ:] [/F:サイズ] [/VERIFY]

    ドライブ:   フロッピーディスクドライブのドライブ文字（A:～Z:）

    /F:サイズ   初期化するディスクの容量
                /F:1.44     1.44MB（一般的なフロッピー容量。デフォルト）
                /F:1.23     1.23MB（いわゆる2HD。PC-98などで使われた）
                /F:1.2      1.2MB （2HCなどと呼ばれる。PC/AT 5インチ高密度標準）
                /F:720      720KB （一般的な2DDフロッピーの容量）
                /F:640      640KB （PC-98などで使われた2DD容量。Windowsでは
                                   非標準扱いであることに注意）

    /VERIFY     フォーマット時にディスクの読み出しチェックを行う。
                標準のformatコマンドとは異なり、読み取りエラーが発生した
                場合、不良クラスタ処理などは行わず、その場でフォーマット
                は失敗する。


注意
----
・エラーチェックなどは最低限しか行っておりません（そのぶん処理が早くなって
  いる場合もあります）。
・FDドライブとWindows側のデバイスドライバが対応していない容量のフォーマットは
  当然できません（手持ちの3モードUSBFDDの中には、640KBの2DDフォーマットが
  できるものとできないものが両方ありました）。


ソース
------
https://github.com/lpproj/mydosuty/tree/master/win/format2hd
